# AI 协作代码编写工作流 — TODO List

🎯 目标：稳定、可控、低返工率地完成代码修改 + 测试

⸻

🟦 阶段一：上下文建立（Context Setup）

☐ 1. 提供项目简介（最小但完整）
•☐ 项目类型（Web / Job / SDK / Service）
•☐ 技术栈（Java / Spring Boot / JPA / MyBatis 等）
•☐ 关键约束（Java 版本、编码规范、禁止项）

⸻

☐ 2. 提供项目代码目录结构
•☐ 给出 src 级别结构
•☐ 标明关键模块（controller / service / repository 等）
•☐ 不提供具体代码内容

⸻

🟦 阶段二：需求理解与代码定位

☐ 3. 提供需求描述（不写代码）
•☐ 清晰说明「要改什么 / 不要改什么」
•☐ 说明期望行为 & 边界条件

⸻

☐ 4. 让 AI 复述理解（⚠️ 只允许文字）
•☐ AI 复述需求
•☐ AI 复述可能涉及的模块
•☐ 人工确认理解是否正确
•☐ 未通过 → 返回第 3 步

⸻

☐ 5. 询问 AI 需要浏览哪些代码
•☐ AI 明确列出需要的文件
•☐ 不接受“整个项目都要”

⸻

☐ 6. 按需逐步提供代码
•☐ 一次只给 AI 要的文件
•☐ 提供完整文件内容（不要截断）
•☐ 询问：“是否还需要其他代码？”
•☐ 需要 → 继续本步骤
•☐ 不需要 → 进入下一阶段

⸻

🟦 阶段三：方案设计与补丁生成

☐ 7. 让 AI 先给「改动方案」（不写代码）
•☐ 描述将修改哪些类 / 方法
•☐ 说明新增 / 修改点
•☐ 不允许顺手重构
•☐ 人工确认方案

⸻

☐ 8. 生成代码补丁（Patch）
•☐ 使用 diff / patch 形式
•☐ 明确文件路径
•☐ 只包含必要改动
•☐ 不引入无关重构

⸻

☐ 9. 本地应用代码补丁
•☐ 人工应用或检查补丁
•☐ 确认逻辑符合预期

⸻

🟦 阶段四：稳定性自检

☐ 10. AI 编译级自检（不改业务逻辑）
•☐ 检查 import 是否缺失
•☐ 检查类可见性 / 泛型
•☐ 检查方法签名匹配
•☐ 只允许修 import / 编译问题

⸻

☐ 11. 本地编译 / 启动验证
•☐ 项目可编译
•☐ 基本启动无异常

⸻

🟦 阶段五：测试补充

☐ 12. 生成 JUnit 测试
•☐ 覆盖核心逻辑
•☐ 包含至少一个异常用例
•☐ 不追求 100% 覆盖率

⸻

☐ 13. 运行测试 & 校验
•☐ 测试可通过
•☐ 如失败，允许 AI 只修测试代码

⸻

🟦 阶段六：收尾确认（可选但推荐）

☐ 14. AI 最终回顾
•☐ 总结改动点
•☐ 提示潜在风险
•☐ 提出后续优化建议（不立即执行）

⸻

🏁 完成标准（Done Definition）
•☐ 功能符合需求
•☐ 项目可编译
•☐ 测试通过
•☐ 无额外无关改动

⸻
